{% extends 'layouts/base.html' %}

{% block title %} Tables {% endblock title %}
{% load static %}
{% block content %}


  <div class="header bg-primary pb-6">
    <div class="container-fluid">
      <div class="header-body">
        <div class="row align-items-center py-4">
          <div class="col-lg-6 col-7">
            <h6 class="h2 text-white d-inline-block mb-0">Product</h6>
            <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4">
              <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
                <li class="breadcrumb-item"><a href="{% url 'frontend:index' %}"><i class="fas fa-home"></i></a></li>
                <li class="breadcrumb-item"><a href="{% url 'store:add_pharmacy' %}">Product</a></li>
                <li class="breadcrumb-item active" aria-current="page">Add Product</li>
              </ol>
            </nav>
          </div>
         
        </div>
      </div>
    </div>
  </div>

    <!-- Dark table -->
    <div class="container-fluid mt--6">
        <div class="row">
          <div class="col-xl-12 order-xl-1">
            <div class="card">
              <div class="card-header">
                <div class="row align-items-center">
                  <div class="col-8">
                    <h3 class="mb-0">Add Product</h3>
                  </div>
                </div>
              </div>
              <div class="card-body">
                  <div class="">
                    <form id='add_product' action="{% url 'store:add_customer_products' %}" method='POST'>
                      {% csrf_token %}
                      <input type='hidden' value="{{pharmacy.id}}" name='pharmacy' id='pharmacy'>  
                      <input type='hidden' value="{{customer_id}}" name='customer_id' id='customer_id'>  
                      <div class='row'>                   
                        <div class="col-lg-6">
                          <div class="form-group">
                            <label class="form-control-label" for="input-first-name">Product</label>
                            <select class="form-control" name='product' id='product'  aria-label="Default select example">
                              <option value>Select product</option>
                              {% for p in products %}
                              <option value='{{p.id}}'>{{p.name}}</option>
                              {% endfor %}
                            </select>                       
                          </div>
                        </div>
                      
                        <div class="col-lg-6">
                          <div class="form-group">
                            <label class="form-control-label" for="input-country">Quantity</label>
                            <input type="number" id="quantity" name='quantity' class="form-control" placeholder="Quantity">
                          </div>
                        </div>
                      </div>

                        <div class="col-lg-6" id='product_type' style='display:none'>
                          <div class="form-group">
                              <p>Please Select Product Type</p>

                              <div class="form-check">
                                  <input class="form-check-input p_t" type="radio" name="product_type" value="tablets" >
                                  <label class="form-check-label" for="tablets">
                                    Tablets
                                  </label></br>
                            
                                  <input class="form-check-input p_t" type="radio" name="product_type"  value="strips">
                                  <label class="form-check-label" for="Strips">
                                    Strips
                                  </label></br>
                              
                                  <input class="form-check-input p_t" type="radio" name="product_type"  value="capsules" >
                                  <label class="form-check-label" for="Capsules">
                                    Capsules
                                  </label></br>
                              
                                  <input class="form-check-input p_t" type="radio" name="product_type"  value="box" >
                                  <label class="form-check-label" for="Box">
                                    Box
                                  </label></br>
                                </div>
                              </div>
                              {% comment %} <input type="radio" id="Box" name="Box" value="Box">
                            Â  <label for="Box">Box</label> {% endcomment %}
                          </div>
                          {% comment %} <span id='error' style='display:none'>please select checkbox</span> {% endcomment %}
                        </div>
                      

                    <div id='append_product'>

                    </div>

                      <button type="submit" id='sub_btn' class="btn btn-primary">Save & Add More</button>
                      <a href="{% url 'store:customer_listing' %}" class="btn btn-primary" style='color:white'>Back</a>
                    </form>

                  </div>
                  
              </div>
            </div>
          </div>
        </div>
      
        {% include "includes/footer.html" %}
      
      </div>



  </div>

{% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %}


 <script>
    $('#product').change(function () {
      alert('fffffffffff')
       value= $('#product').val()
       $.ajax({
        url:"/store/customer-product-type/{{value}}" +value,
        type:"GET",
        //dataType : 'json',
        success: function( response ) {
              if (response.tablets == true){
                $("#product_type").css("display", "block") 
                    if (($('.p_t').prop('checked')==false)){
                      $('#sub_btn').prop('disabled', true);
                    } 
                    else{
                      $('#error').css('display','none')
                      $('#sub_btn').prop('disabled', false);
                    }
              }else{
                $("#product_type").css("display", "None")  
                $(".p_t").prop('checked', false)
                $('#sub_btn').prop('disabled', false);
              }
            
          }
      })
    })

    $('.p_t').click(function(){
      $('#error').css('display','none')
      $('#sub_btn').prop('disabled', false);
    })

 </script> 
 
<script>
    $("#add_product").validate({
      rules: {
        product: {
             required: true,
        },              
       quantity :{
         required: true,
       },        
    },
    messages: {
      product: "Please Enter Pharmacy Name", 
      quantity: "Please Enter Quantity",              
  }
})

$('#plus_button').click(function(){
  
  var abc=$('#product').val();
console.log(abc);
  var e=$(` <div class='row'>
                        <div class="col-lg-6">
                          <div class="form-group">
                            <label class="form-control-label" for="input-first-name">Product</label>
                            <select class="form-control" name='product' id='product'  aria-label="Default select example">
                              <option selected disabled>Select product</option>
                              {% for p in products %}
                              <option value='{{p.id}}'>{{p.name}}</option>
                              {% endfor %}
                            </select>                       
                          </div>
                        </div>

                        <div class="col-lg-4">
                          <div class="form-group">
                            <label class="form-control-label" for="input-country">Quantity</label>
                            <input type="number" id="quantity" name='quantity' class="form-control" placeholder="Quantity">
                          </div>
                        </div>
                        <div class="col-lg-2" style='margin-top:32px'>
                          <div class="form-group">
                          </div>
                        </div> `)
  $('#append_product').append(e)
})
</script>  
{% endblock javascripts %}
